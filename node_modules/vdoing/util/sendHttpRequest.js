
const transTextToFile = require('./transTextToFile')
const request = require('urllib-sync').request;

const options = {  
  method: 'GET',
  headers: {
    'Content-Type': 'application/json'
  }
}

module.exports = function sendHttpRequest(swaggerDir) {
  console.log('-------开始发起请求------')
  const response = request('localhost:8004/materials/files', options, function(error, data, res) {
      if (error) {
        throw error
      }
  })
  if (response.status === 200) {
    const result = response.data.toString('utf8')
    transTextToFile(swaggerDir, JSON.parse(result).data);
  }
  console.log('-------读取服务器文件完成------')
}