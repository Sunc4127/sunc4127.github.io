{"remainingRequest":"/Users/chengsun/Desktop/sunc4127.github.io/vuepress-theme-vdoing/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/chengsun/Desktop/sunc4127.github.io/vuepress-theme-vdoing/node_modules/vuepress-plugin-comment/util.js","dependencies":[{"path":"/Users/chengsun/Desktop/sunc4127.github.io/vuepress-theme-vdoing/node_modules/vuepress-plugin-comment/util.js","mtime":1636678367672},{"path":"/Users/chengsun/Desktop/sunc4127.github.io/vuepress-theme-vdoing/node_modules/cache-loader/dist/cjs.js","mtime":1636678368190},{"path":"/Users/chengsun/Desktop/sunc4127.github.io/vuepress-theme-vdoing/node_modules/babel-loader/lib/index.js","mtime":1636678368315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2NoZW5nc3VuL0Rlc2t0b3Avc3VuYzQxMjcuZ2l0aHViLmlvL3Z1ZXByZXNzLXRoZW1lLXZkb2luZy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZmxlY3Qub3duLWtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWZsZWN0LnRvLXN0cmluZy10YWcuanMiOwppbXBvcnQgZWpzIGZyb20gJ2Vqcyc7CmltcG9ydCBjb25maWcgZnJvbSAnLi9wYWNrYWdlLmpzb24nOwp2YXIgR2l0YWxrLCBWYWxpbmU7CmxvYWRTY3JpcHQoQ09NTUVOVF9DSE9PU0VOKTsKdmFyIGRlZmF1bHRDaG9vc2VuID0gJ2NvbW1lbnQgcGx1Z2lucyc7CmNvbnNvbGUubG9nKCJIb3cgdG8gdXNlIFwiIi5jb25jYXQoQ09NTUVOVF9DSE9PU0VOIHx8IGRlZmF1bHRDaG9vc2VuLCAiXCIgaW4gIikuY29uY2F0KGNvbmZpZy5uYW1lLCAiQHYiKS5jb25jYXQoY29uZmlnLnZlcnNpb24sICI6IiksIGNvbmZpZy5ob21lcGFnZSk7Ci8qKgogKiBMYXp5IGxvYWQgcGtnCiAqIAogKiBAcGFyYW0ge1N0cmluZ30gbmFtZSAKICovCgpleHBvcnQgZnVuY3Rpb24gbG9hZFNjcmlwdChuYW1lKSB7CiAgaWYgKG5hbWUgPT09ICd2YWxpbmUnKSB7CiAgICBpbXBvcnQoJ3ZhbGluZScpLnRoZW4oZnVuY3Rpb24gKHBrZykgewogICAgICByZXR1cm4gVmFsaW5lID0gcGtnWyJkZWZhdWx0Il07CiAgICB9KTsKICB9IGVsc2UgaWYgKG5hbWUgPT09ICdnaXRhbGsnKSB7CiAgICBpbXBvcnQoJ2dpdGFsay9kaXN0L2dpdGFsay5jc3MnKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnZ2l0YWxrJyk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChwa2cpIHsKICAgICAgcmV0dXJuIEdpdGFsayA9IHBrZ1siZGVmYXVsdCJdOwogICAgfSk7CiAgfQp9Ci8qKgogKiBSZW5kZXIgZWpzIHN0cmluZ3MgaW4gY29uZmlndXJhdGlvbgogKiAKICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAKICogQHBhcmFtIHtPYmplY3R9IGRhdGEgCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckNvbmZpZyhjb25maWcsIGRhdGEpIHsKICB2YXIgcmVzdWx0ID0ge307CiAgUmVmbGVjdC5vd25LZXlzKGNvbmZpZykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICBpZiAodHlwZW9mIGNvbmZpZ1trZXldID09PSAnc3RyaW5nJykgewogICAgICB0cnkgewogICAgICAgIHJlc3VsdFtrZXldID0gZWpzLnJlbmRlcihjb25maWdba2V5XSwgZGF0YSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS53YXJuKCJDb21tZW50IGNvbmZpZyBvcHRpb24gZXJyb3IgYXQga2V5IG5hbWVkIFwiIi5jb25jYXQoa2V5LCAiXCIiKSk7CiAgICAgICAgY29uc29sZS53YXJuKCJNb3JlIGluZm86ICIuY29uY2F0KGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICByZXN1bHRba2V5XSA9IGNvbmZpZ1trZXldOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXN1bHRba2V5XSA9IGNvbmZpZ1trZXldOwogICAgfQogIH0pOwogIHJldHVybiByZXN1bHQ7Cn0KLyoqCiAqIFN1cHBvcnQgR2l0YWxrIGFuZCBzbyBvbi4KICovCgpleHBvcnQgdmFyIHByb3ZpZGVyID0gewogIGdpdGFsazogewogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoZnJvbnRtYXR0ZXIsIGNvbW1lbnREb21JRCkgewogICAgICB2YXIgY29tbWVudERPTSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBjb21tZW50RE9NLmlkID0gY29tbWVudERvbUlEOwogICAgICB2YXIgcGFyZW50RE9NID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihDT01NRU5UX0NPTlRBSU5FUik7CiAgICAgIHBhcmVudERPTS5hcHBlbmRDaGlsZChjb21tZW50RE9NKTsKICAgICAgdmFyIGdpdHRhbGsgPSBuZXcgR2l0YWxrKHJlbmRlckNvbmZpZyhDT01NRU5UX09QVElPTlMsIHsKICAgICAgICBmcm9udG1hdHRlcjogZnJvbnRtYXR0ZXIKICAgICAgfSkpOwogICAgICBnaXR0YWxrLnJlbmRlcihjb21tZW50RG9tSUQpOwogICAgfSwKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcihjb21tZW50RG9tSUQpIHsKICAgICAgdmFyIGxhc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjIi5jb25jYXQoY29tbWVudERvbUlEKSk7CgogICAgICBpZiAobGFzdCkgewogICAgICAgIGxhc3QucmVtb3ZlKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sCiAgdmFsaW5lOiB7CiAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihmcm9udG1hdHRlciwgY29tbWVudERvbUlEKSB7CiAgICAgIHZhciBjb21tZW50RE9NID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGNvbW1lbnRET00uaWQgPSBjb21tZW50RG9tSUQ7CiAgICAgIHZhciBwYXJlbnRET00gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKENPTU1FTlRfQ09OVEFJTkVSKTsKICAgICAgcGFyZW50RE9NLmFwcGVuZENoaWxkKGNvbW1lbnRET00pOwogICAgICBuZXcgVmFsaW5lKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcmVuZGVyQ29uZmlnKENPTU1FTlRfT1BUSU9OUywgewogICAgICAgIGZyb250bWF0dGVyOiBmcm9udG1hdHRlcgogICAgICB9KSksIHt9LCB7CiAgICAgICAgZWw6ICIjIi5jb25jYXQoY29tbWVudERvbUlEKQogICAgICB9KSk7CiAgICB9LAogICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKGNvbW1lbnREb21JRCkgewogICAgICB2YXIgbGFzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiMiLmNvbmNhdChjb21tZW50RG9tSUQpKTsKCiAgICAgIGlmIChsYXN0KSB7CiAgICAgICAgbGFzdC5yZW1vdmUoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/chengsun/Desktop/sunc4127.github.io/vuepress-theme-vdoing/node_modules/vuepress-plugin-comment/util.js"],"names":["ejs","config","Gitalk","Valine","loadScript","COMMENT_CHOOSEN","defaultChoosen","console","log","name","version","homepage","then","pkg","renderConfig","data","result","Reflect","ownKeys","forEach","key","render","error","warn","message","provider","gitalk","frontmatter","commentDomID","commentDOM","document","createElement","id","parentDOM","querySelector","COMMENT_CONTAINER","appendChild","gittalk","COMMENT_OPTIONS","clear","last","remove","valine","el"],"mappings":";;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AAEA,OAAOC,MAAP,MAAmB,gBAAnB;AAEA,IAAIC,MAAJ,EAAYC,MAAZ;AACAC,UAAU,CAACC,eAAD,CAAV;AAEA,IAAMC,cAAc,GAAG,iBAAvB;AACAC,OAAO,CAACC,GAAR,wBACiBH,eAAe,IAAIC,cADpC,mBAC0DL,MAAM,CAACQ,IADjE,eAC0ER,MAAM,CAACS,OADjF,QAEET,MAAM,CAACU,QAFT;AAKA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASP,UAAT,CAAqBK,IAArB,EAA2B;AAChC,MAAIA,IAAI,KAAK,QAAb,EAAuB;AACrB,WAAO,QAAP,EACCG,IADD,CACM,UAAAC,GAAG;AAAA,aAAIV,MAAM,GAAGU,GAAG,WAAhB;AAAA,KADT;AAED,GAHD,MAGO,IAAIJ,IAAI,KAAK,QAAb,EAAuB;AAC5B,WAAO,wBAAP,EACCG,IADD,CACM;AAAA,aAAM,OAAO,QAAP,CAAN;AAAA,KADN,EAECA,IAFD,CAEM,UAAAC,GAAG;AAAA,aAAIX,MAAM,GAAGW,GAAG,WAAhB;AAAA,KAFT;AAGD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,YAAT,CAAuBb,MAAvB,EAA+Bc,IAA/B,EAAqC;AAC1C,MAAMC,MAAM,GAAG,EAAf;AAEAC,EAAAA,OAAO,CAACC,OAAR,CAAgBjB,MAAhB,EACGkB,OADH,CACW,UAAAC,GAAG,EAAI;AACd,QAAI,OAAOnB,MAAM,CAACmB,GAAD,CAAb,KAAuB,QAA3B,EAAqC;AACnC,UAAI;AACFJ,QAAAA,MAAM,CAACI,GAAD,CAAN,GAAcpB,GAAG,CAACqB,MAAJ,CAAWpB,MAAM,CAACmB,GAAD,CAAjB,EAAwBL,IAAxB,CAAd;AACD,OAFD,CAEE,OAAOO,KAAP,EAAc;AACdf,QAAAA,OAAO,CAACgB,IAAR,sDAA0DH,GAA1D;AACAb,QAAAA,OAAO,CAACgB,IAAR,sBAA2BD,KAAK,CAACE,OAAjC;AACAR,QAAAA,MAAM,CAACI,GAAD,CAAN,GAAcnB,MAAM,CAACmB,GAAD,CAApB;AACD;AACF,KARD,MAQO;AACLJ,MAAAA,MAAM,CAACI,GAAD,CAAN,GAAcnB,MAAM,CAACmB,GAAD,CAApB;AACD;AACF,GAbH;AAeA,SAAOJ,MAAP;AACD;AAED;AACA;AACA;;AACA,OAAO,IAAMS,QAAQ,GAAG;AACtBC,EAAAA,MAAM,EAAE;AACNL,IAAAA,MADM,kBACEM,WADF,EACeC,YADf,EAC6B;AACjC,UAAMC,UAAU,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAnB;AACAF,MAAAA,UAAU,CAACG,EAAX,GAAgBJ,YAAhB;AAEA,UAAMK,SAAS,GAAGH,QAAQ,CAACI,aAAT,CAAuBC,iBAAvB,CAAlB;AACAF,MAAAA,SAAS,CAACG,WAAV,CAAsBP,UAAtB;AAEA,UAAMQ,OAAO,GAAG,IAAInC,MAAJ,CAAWY,YAAY,CAACwB,eAAD,EAAkB;AAAEX,QAAAA,WAAW,EAAXA;AAAF,OAAlB,CAAvB,CAAhB;AACAU,MAAAA,OAAO,CAAChB,MAAR,CAAeO,YAAf;AACD,KAVK;AAWNW,IAAAA,KAXM,iBAWCX,YAXD,EAWe;AACnB,UAAMY,IAAI,GAAGV,QAAQ,CAACI,aAAT,YAA2BN,YAA3B,EAAb;;AACA,UAAIY,IAAJ,EAAU;AACRA,QAAAA,IAAI,CAACC,MAAL;AACD;;AACD,aAAO,IAAP;AACD;AAjBK,GADc;AAoBtBC,EAAAA,MAAM,EAAE;AACNrB,IAAAA,MADM,kBACEM,WADF,EACeC,YADf,EAC6B;AACjC,UAAMC,UAAU,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAnB;AACAF,MAAAA,UAAU,CAACG,EAAX,GAAgBJ,YAAhB;AAEA,UAAMK,SAAS,GAAGH,QAAQ,CAACI,aAAT,CAAuBC,iBAAvB,CAAlB;AACAF,MAAAA,SAAS,CAACG,WAAV,CAAsBP,UAAtB;AAEA,UAAI1B,MAAJ,iCACKW,YAAY,CAACwB,eAAD,EAAkB;AAAEX,QAAAA,WAAW,EAAXA;AAAF,OAAlB,CADjB;AAEEgB,QAAAA,EAAE,aAAMf,YAAN;AAFJ;AAID,KAZK;AAaNW,IAAAA,KAbM,iBAaCX,YAbD,EAae;AACnB,UAAMY,IAAI,GAAGV,QAAQ,CAACI,aAAT,YAA2BN,YAA3B,EAAb;;AACA,UAAIY,IAAJ,EAAU;AACRA,QAAAA,IAAI,CAACC,MAAL;AACD;;AACD,aAAO,IAAP;AACD;AAnBK;AApBc,CAAjB","sourcesContent":["import ejs from 'ejs'\n\nimport config from './package.json'\n\nlet Gitalk, Valine\nloadScript(COMMENT_CHOOSEN)\n\nconst defaultChoosen = 'comment plugins'\nconsole.log(\n  `How to use \"${COMMENT_CHOOSEN || defaultChoosen}\" in ${config.name}@v${config.version}:`,\n  config.homepage\n)\n\n/**\n * Lazy load pkg\n * \n * @param {String} name \n */\nexport function loadScript (name) {\n  if (name === 'valine') {\n    import('valine')\n    .then(pkg => Valine = pkg.default)\n  } else if (name === 'gitalk') {\n    import('gitalk/dist/gitalk.css')\n    .then(() => import('gitalk'))\n    .then(pkg => Gitalk = pkg.default)\n  }\n}\n\n/**\n * Render ejs strings in configuration\n * \n * @param {Object} config \n * @param {Object} data \n */\nexport function renderConfig (config, data) {\n  const result = {}\n\n  Reflect.ownKeys(config)\n    .forEach(key => {\n      if (typeof config[key] === 'string') {\n        try {\n          result[key] = ejs.render(config[key], data)\n        } catch (error) {\n          console.warn(`Comment config option error at key named \"${key}\"`)\n          console.warn(`More info: ${error.message}`)\n          result[key] = config[key]\n        }\n      } else {\n        result[key] = config[key]\n      }\n    })\n  \n  return result\n}\n\n/**\n * Support Gitalk and so on.\n */\nexport const provider = {\n  gitalk: {\n    render (frontmatter, commentDomID) {\n      const commentDOM = document.createElement('div')\n      commentDOM.id = commentDomID\n\n      const parentDOM = document.querySelector(COMMENT_CONTAINER)\n      parentDOM.appendChild(commentDOM)\n      \n      const gittalk = new Gitalk(renderConfig(COMMENT_OPTIONS, { frontmatter }))\n      gittalk.render(commentDomID)\n    },\n    clear (commentDomID) {\n      const last = document.querySelector(`#${commentDomID}`)\n      if (last) {\n        last.remove()\n      }\n      return true\n    }\n  },\n  valine: {\n    render (frontmatter, commentDomID) {\n      const commentDOM = document.createElement('div')\n      commentDOM.id = commentDomID\n\n      const parentDOM = document.querySelector(COMMENT_CONTAINER)\n      parentDOM.appendChild(commentDOM)\n\n      new Valine({\n        ...renderConfig(COMMENT_OPTIONS, { frontmatter }),\n        el: `#${commentDomID}`\n      })\n    },\n    clear (commentDomID) {\n      const last = document.querySelector(`#${commentDomID}`)\n      if (last) {\n        last.remove()\n      }\n      return true\n    }\n  }\n}"]}]}